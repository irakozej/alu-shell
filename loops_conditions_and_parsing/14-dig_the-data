#!/usr/bin/env bash
# This script groups visitors by IP and HTTP status code

# Parse the Apache log file and print the occurrence number, IP, and HTTP code
awk '{ print $1, $9, $7 }' "$1" |

# Use sort to group and count occurrences of IP and HTTP code
sort |

# Use awk to sum the occurrence numbers for each IP and HTTP code combination
awk '{ count[$1" "$2] += $3 }

# Iterate over the count array and print the results
END {
    for (key in count) {
        print count[key], key
    }
}' |

# Use sort to order the data from greatest to lowest number of occurrences
sort -rn

